!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(this,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{olli:()=>m});function i(e){var t=document.createElement("ul");return t.appendChild(function(e){var t=document.createElement("li");t.setAttribute("role","treeitem"),t.setAttribute("aria-expanded","false");var n=document.createElement("ul"),r=document.createElement("span");r.appendChild(document.createTextNode(e.description));var o=e.children,s=o.filter((function(e){return"data"===e.type}));if(s.length>0){var a=document.createElement("table"),d=document.createElement("tbody"),c=document.createElement("tr");e.fieldsUsed.forEach((function(e){var t=document.createElement("th");t.setAttribute("class","tableInformation"),t.innerText=e,c.appendChild(t)})),d.appendChild(c),s.forEach((function(t){var i=document.createElement("tr");e.fieldsUsed.forEach((function(e){var n=document.createElement("td");n.setAttribute("class","tableInformation");var r=t.selected[0][e];isNaN(r)||r%1==0?n.innerText=t.selected[0][e]:n.innerText=Number(r).toFixed(2),i.appendChild(n)})),d.appendChild(i)})),a.appendChild(d),n.appendChild(a)}t.appendChild(r),o.length>0&&(o.filter((function(e){return"data"!==e.type})).forEach((function(e){n.appendChild(i(e))})),t.appendChild(n));var l=document.createElement("style");return l.innerHTML='ul[role="tree"] {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n  }\n  \n  ul[role="tree"] li {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n  }\n  \n  ul[role="tree"] a {\n    text-decoration: underline;\n    border-color: transparent;\n  }\n  \n  [role="treeitem"] ul {\n    margin: 0;\n    padding: 0;\n    margin-left: 0.9em;\n  }\n  \n  [role="treeitem"][aria-expanded="false"] > ul {\n    display: none;\n  }\n  \n  [role="treeitem"][aria-expanded="true"] > ul {\n    display: block;\n  }\n  \n  [role="treeitem"][aria-expanded="false"] > span::before {\n    position: relative;\n    left: -0.25em;\n  }\n  \n  [role="treeitem"][aria-expanded="true"] > span::before {\n    position: relative;\n    left: -0.25em;\n  }\n  \n  /* [role="treeitem"], */\n  [role="treeitem"] span {\n    width: 16em;\n    margin: 0;\n    padding: 0.125em;\n    border: 2px transparent solid;\n    display: block;\n  }\n  \n  /* disable default keyboard focus styling for treeitems\n     Keyboard focus is styled with the following CSS */\n  [role="treeitem"]:focus {\n    outline: 0;\n  }\n  \n  [role="treeitem"].focus,\n  [role="treeitem"] span.focus {\n    border-color: black;\n    background-color: #ddd;\n  }\n  \n  [role="treeitem"].hover,\n  [role="treeitem"] span.hover {\n    background-color: #ddd;\n  }',document.head.appendChild(l),t}(e)),t}var n,r=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=function(){function e(e,t,i,n){if(e.tabIndex=-1,this.tree=t,this.parent=i,this.domNode=e,this.label=e.textContent.trim(),this.stopDefaultClick=!1,this.level=n,this.children=[],this.lastVisitedChild=null,"object"==typeof e){e.getAttribute("aria-label")&&(this.label=e.getAttribute("aria-label").trim()),this.isExpandable=!1,this.isVisible=!1,this.inGroup=!1,i&&(this.inGroup=!0);for(var r=e.firstElementChild;r;){if("ul"==r.tagName.toLowerCase()){r.setAttribute("role","group"),this.isExpandable=!0;break}r=r.nextElementSibling}this.keyCode=Object.freeze({RETURN:13,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,X:88,Y:89,L:76,G:71,W:87,A:65,S:83,D:68,ESCAPE:27,PLUS:107,MINUS:189})}}return e.prototype.init=function(){this.domNode.tabIndex=-1,this.domNode.getAttribute("role")||this.domNode.setAttribute("role","treeitem"),this.domNode.addEventListener("keydown",this.handleKeydown.bind(this)),this.domNode.addEventListener("click",this.handleClick.bind(this)),this.domNode.addEventListener("focus",this.handleFocus.bind(this)),this.domNode.addEventListener("blur",this.handleBlur.bind(this)),this.isExpandable?(this.domNode.firstElementChild.addEventListener("mouseover",this.handleMouseOver.bind(this)),this.domNode.firstElementChild.addEventListener("mouseout",this.handleMouseOut.bind(this))):(this.domNode.addEventListener("mouseover",this.handleMouseOver.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseOut.bind(this)))},e.prototype.isExpanded=function(){return!!this.isExpandable&&"true"===this.domNode.getAttribute("aria-expanded")},e.prototype.handleKeydown=function(e){if(this.stopDefaultClick=!1,!(e.altKey||e.ctrlKey||e.metaKey))if(e.shiftKey){var t=this.getRootNode();if(e.keyCode==this.keyCode.SPACE||e.keyCode==this.keyCode.RETURN)e.stopPropagation(),this.stopDefaultClick=!0;else if(t.label.includes("nested charts")&&e.target===this.domNode){var i=function(e){for(var t=[],i=e;void 0!==i;){if(i.parent){var n=i.parent.children.indexOf(i);-1!==n&&t.push(n)}i=i.parent}return t};if(e.keyCode===this.keyCode.LEFT)(n=i(this).reverse())[0]=n[0]-1,n[0]>=0&&this.shiftToNode(n);else if(e.keyCode===this.keyCode.RIGHT){var n;(n=i(this).reverse())[0]=n[0]+1,n[n.length-1]<t.children.length&&this.shiftToNode(n)}}}else this.checkBaseKeys(e)},e.prototype.checkBaseKeys=function(e){var t=!1;switch(e.keyCode){case this.keyCode.SPACE:case this.keyCode.RETURN:this.isExpandable?(this.isExpanded()?this.tree.collapseTreeitem(this):this.tree.expandTreeitem(this),t=!0):(e.stopPropagation(),this.stopDefaultClick=!0);break;case this.keyCode.DOWN:this.children.length>0&&(this.isExpandable&&this.tree.expandTreeitem(this),this.tree.setFocusToNextLaver()),t=!0;break;case this.keyCode.LEFT:this.tree.setFocusToPreviousItem(),t=!0;break;case this.keyCode.RIGHT:this.tree.setFocusToNextItem(),t=!0;break;case this.keyCode.ESCAPE:case this.keyCode.UP:this.isExpandable&&this.isExpanded()?(this.tree.setFocusToParentItem(),this.tree.collapseTreeitem(this),t=!0):this.inGroup&&(this.tree.setFocusToParentItem(),t=!0);break;case this.keyCode.HOME:this.tree.setFocusToItem(this.parent.children[0]),t=!0;break;case this.keyCode.END:this.tree.setFocusToItem(this.parent.children[this.parent.children.length-1]),t=!0;case this.keyCode.X:case this.keyCode.Y:case this.keyCode.L:}t&&(e.stopPropagation(),e.preventDefault())},e.prototype.handleClick=function(e){e.target!==this.domNode&&e.target!==this.domNode.firstElementChild||this.isExpandable&&(this.isExpanded()?(this.tree.setFocusToItem(this),this.tree.collapseTreeitem(this)):(this.isExpandable&&!this.isExpanded()&&(this.tree.expandTreeitem(this),this.tree.setFocusToItem(this)),this.tree.setFocusToNextLaver()),e.stopPropagation())},e.prototype.handleFocus=function(e){var t=this.domNode;this.isExpandable&&(t=t.firstElementChild),t.classList.add("focus")},e.prototype.handleBlur=function(e){var t=this.domNode;this.isExpandable&&(t=t.firstElementChild),t.classList.remove("focus")},e.prototype.handleMouseOver=function(e){e.currentTarget.classList.add("hover")},e.prototype.handleMouseOut=function(e){e.currentTarget.classList.remove("hover")},e.prototype.getRootNode=function(){return void 0!==this.parent?this.parent.getRootNode():this},e.prototype.shiftToNode=function(e){var t=e.reduce((function(e,t,i){return void 0===e.children[t]?e:e.children[t]}),this.getRootNode());this.tree.setFocusToAdjacentItem(t)},e}(),s=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this,s=function(e){return o.parent.parent.children.reduce((function(t,i){return i.label.includes(e)?i:t}))};return o.gridIndex=o.parent.children.length,o.gridWidth=o.parent.parent.label.includes("facet")?s("Y-Axis").children.length:s("X-Axis").children.length,o.rowPosition=function(){if(0!==o.gridIndex){var e=o.parent.children[o.gridIndex-1].rowPosition;return e===o.gridWidth?1:e+1}return 1}(),o}return r(t,e),t.prototype.handleKeydown=function(t){e.prototype.handleKeydown.call(this,t);var i=this.parent.children.indexOf(this);switch(t.keyCode){case this.keyCode.W:i+this.gridWidth<this.parent.children.length&&this.tree.setFocusToItem(this.parent.children[i+this.gridWidth]);break;case this.keyCode.S:i-this.gridWidth>=0&&this.tree.setFocusToItem(this.parent.children[i-this.gridWidth]);break;case this.keyCode.A:this.rowPosition>1&&this.tree.setFocusToItem(this.parent.children[i-1]);break;case this.keyCode.D:this.rowPosition<this.gridWidth&&this.tree.setFocusToItem(this.parent.children[i+1])}},t}(o),a=function(){function e(e){"object"==typeof e&&(this.domNode=e,this.treeitems=[])}return e.prototype.init=function(){this.domNode.getAttribute("role")||this.domNode.setAttribute("role","tree"),function e(t,i,n,r){for(var a=t.firstElementChild,d=n;a;)("li"===a.tagName.toLowerCase()&&"span"===a.firstElementChild.tagName.toLowerCase()||"tr"===a.tagName.toLowerCase()||"th"===a.tagName.toLowerCase()||"td"===a.tagName.toLowerCase())&&((d=n&&"Grid view"===n.label.substring(0,9)?new s(a,i,n,r):new o(a,i,n,r)).init(),n&&n.children.push(d),i.treeitems.push(d)),a.firstElementChild&&e(a,i,d,r+1),a=a.nextElementSibling}(this.domNode,this,void 0,0),this.updateVisibleTreeitems(),this.firstTreeitem.domNode.tabIndex=0,this.currentNode=this.firstTreeitem},e.prototype.setFocusToItem=function(e){this.currentNode.domNode.tabIndex=0,this.currentNode=e,this.currentNode.domNode.focus()},e.prototype.setFocusToAdjacentItem=function(e){this.currentNode.domNode.tabIndex=0;for(var t=this.currentNode.parent;void 0!==t;)t.domNode.setAttribute("aria-expanded",!1),this.updateVisibleTreeitems(),t=t.parent;if(!e.isVisible)for(var i=e;!e.isVisible;)this.expandTreeitem(i.parent),i=i.parent;this.currentNode=e,this.currentNode.domNode.focus()},e.prototype.setFocusToNextItem=function(){if(this.currentNode.parent){var e=this.currentNode.parent.children.indexOf(this.currentNode);e<this.currentNode.parent.children.length-1&&this.setFocusToItem(this.currentNode.parent.children[e+1])}},e.prototype.setFocusToNextLaver=function(){null!==this.currentNode.lastVisitedChild?this.setFocusToItem(this.currentNode.lastVisitedChild):this.setFocusToItem(this.currentNode.children[0])},e.prototype.setFocusToPreviousItem=function(){if(this.currentNode.parent){var e=this.currentNode.parent.children.indexOf(this.currentNode);e>0&&this.setFocusToItem(this.currentNode.parent.children[e-1])}},e.prototype.setFocusToParentItem=function(){this.currentNode.parent&&(this.currentNode.parent.lastVisitedChild=this.currentNode,this.setFocusToItem(this.currentNode.parent),this.currentNode.isExpandable&&this.currentNode.isExpanded()&&this.collapseTreeitem(this.currentNode))},e.prototype.setFocusToFirstItem=function(){this.setFocusToItem(this.firstTreeitem)},e.prototype.setFocusToLastItem=function(){this.setFocusToItem(this.lastTreeitem)},e.prototype.expandTreeitem=function(e){e.isExpandable&&(e.domNode.setAttribute("aria-expanded",!0),this.updateVisibleTreeitems())},e.prototype.expandAllSiblingItems=function(e){for(var t=0;t<this.treeitems.length;t++){var i=this.treeitems[t];i.parent===e.parent&&i.isExpandable&&this.expandTreeitem(i)}},e.prototype.collapseTreeitem=function(e){var t;(t=e.isExpanded()?this.currentNode:this.currentNode.parent)&&(t.domNode.setAttribute("aria-expanded",!1),this.updateVisibleTreeitems(),this.setFocusToItem(t))},e.prototype.updateVisibleTreeitems=function(){this.firstTreeitem=this.treeitems[0];for(var e=0;e<this.treeitems.length;e++){var t=this.treeitems[e],i=t.domNode.parentNode;for(t.isVisible=!0;i&&i!==this.domNode;)"false"==i.getAttribute("aria-expanded")&&(t.isVisible=!1),i=i.parentNode;t.isVisible&&(this.lastTreeitem=t)}},e.prototype.focusOnSpecificNode=function(e,t,i){var n,r=this,o=i||[];if(!o.includes(t))if(o.push(t),t.label.split(" ")[0].toLowerCase()===e){var s=function(e){e&&(e.isExpanded()||(r.expandTreeitem(e),s(e.parent)))};s(t.parent),t.isExpanded()&&(t!==(n=this.currentNode)&&(n.parent.lastVisitedChild=n,r.currentNode=n.parent,r.collapseTreeitem(r.currentNode)),t.lastVisitedChild=this.currentNode,this.collapseTreeitem(this.currentNode)),this.setFocusToItem(t)}else t.parent&&this.focusOnSpecificNode(e,t.parent,o),t.children.forEach((function(t){return r.focusOnSpecificNode(e,t,o)}))},e}();function d(e,t,i,n,r){if(i.length>0){var o=i.pop(),s=o.scaleType?"for a ".concat(o.scaleType," scale "):"",a=Array.isArray(o.field)?o.field[1]:o.field,c=o.data[0][a];if(void 0===c){var l=Object.keys(o.data[0]).find((function(e){return e.includes(a)||a.includes(e)}));l&&(a=l,c=o.data[0][a])}var u=o.data.reduce((function(e,t){return null!==t[a]&&t[a]<e?t[a]:e}),o.data[0][a]),h=o.data.reduce((function(e,t){return null!==t[a]&&t[a]>e?t[a]:e}),o.data[0][a]);a.toLowerCase().includes("date")&&(u=new Date(u).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}),h=new Date(h).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}));var f="".concat(o.title," ").concat(s,"with values from ").concat(u," to ").concat(h);return e.push(p(f,t,o.data,o.title.includes("Y-Axis")?"yAxis":"xAxis",o)),d(e,t,i,n,r)}if(n.length>0){var m=n.pop(),y=m.scaleType?"for ".concat(m.scaleType," scale "):"",b=p(m.title,t,m.data,"legend",m);return b.description="Legend titled '".concat(b.description,"' ").concat(y,"with ").concat(b.children.length," values"),e.push(b),d(e,t,i,n,r)}if(r.length>0&&2===r.length){var v=[r.pop(),r.pop()];return e.push(p("Grid view of the data",t,v[0].data,"grid",v)),d(e,t,i,n,r)}return e}function c(e){return e.every((function(e){return"string"==typeof e}))}function l(e,t,i,n){if(c(n))return e.push([t]),e;var r=void 0,o=i-1;if(-1===o&&0!==t)r=[t-(a=n[i+1]-t),t];else if(i===n.length-1){var s,a=t-n[i-1];s=t instanceof Date?t.getTime()+a:t+a,e.push([n[o],t]),r=[t,s]}else r=[n[o],n[o+1]];return e.push([r[0],r[1]]),e}function u(e,t,i){if(t.length>0){var n=t.pop(),r={};Object.keys(n).forEach((function(e){e.toLowerCase().includes("date")?r[e]=new Date(n[e]).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}):r[e]=n[e]})),e.push(p(f(n),i,[r],"data")),u(e,t,i)}return e}function h(e,t,i){return"multiView"===e?function(e,t){t.type;var i=[];return t.charts.forEach((function(n,r,o){i.push(p("A facet titled ".concat(r,", ").concat(i.length+1," of ").concat(o.size),e,t.data,"chart",n))})),i}(t,i):"chart"===e?d([],t,i.axes,i.legends,i.gridNodes):"xAxis"===e||"yAxis"===e||"legend"===e?function(e,t,i,n,r){var o=e.description.toLowerCase();if(c(i)&&!t.includes("date")||"legend"===e.type)return i.map((function(i){return p("".concat([[i]]),e,n.filter((function(e){return e[t]===i})),"filteredData",n.filter((function(e){return e[t]===i})))}));var s=i,a=function(e,i){return n.filter((function(n){if((o.includes("date")||o.includes("temporal"))&&4===i.toString().length){var r=new Date(n[t]);return r.getFullYear()>=e&&r.getFullYear()<i}if(void 0===n[t]){var s=Object.keys(n).find((function(e){return e.includes(t)||t.includes(e)}));if(s)return n[s]>=e&&n[s]<i}return n[t]>=e&&n[t]<i}))};return("bar"!==r||o.includes("date")||t.includes("date")?s.reduce(l,[]):s.map((function(e){return[e,e]}))).map((function(i){var n="";return(o.includes("date")||t.includes("date")||e.description.includes("temporal"))&&i[0].toString().length>4?i.forEach((function(e){return n+="".concat(new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}),", ")})):n="".concat(i,","),p(n,e,a(i[0],i[1]),"filteredData",a(i[0],i[1]))}))}(t,i.field,i.values,i.data,i.markUsed):"filteredData"===e?u([],i.map((function(e){return Object.assign({},e)})),t):"grid"===e?function(e,t,i,n,r){var o=[],s=i.reduce(l,[]),a=n.reduce(l,[]);return s.forEach((function(i){a.forEach((function(n){var s,a,d,c,l=(s=n[0],a=i[0],d=n[1],c=i[1],r.filter((function(e){var i=function(t,i,n){return n?e[t]>=i&&e[t]<n:e[t]===i};return i(t[1],s,d)&&i(t[0],a,c)})));o.push(p("".concat([i,n]),e,l,"filteredData",l))}))})),o}(t,[i[0].field,i[1].field],i[0].values,i[1].values,i[0].data):[]}function p(e,t,i,n,r){var o={description:e,parent:t,children:[],selected:i,type:n,fieldsUsed:null!==t?t.fieldsUsed:r.dataFieldsUsed};return r&&(o.children=h(n,o,r)),o.description=f(o),o}function f(e){return"multiView"===e.type||"chart"===e.type||"xAxis"===e.type||"yAxis"===e.type||"legend"===e.type?e.description:"filteredData"===e.type?"Range ".concat(e.description," ").concat(e.selected.length," values in the interval"):"grid"===e.type?e.description:"data"===e.type?e.fieldsUsed.reduce((function(t,i){return"".concat(t," ").concat(i,": ").concat(e.selected[0][i])}),""):""}function m(e){var t,n,r,o,s,d,c=function(e){var t;if("facetedChart"===e.type){var i=e;i.charts.forEach((function(e,t){e.data=e.data.filter((function(e){return e[i.facetedField]===t}));var n=function(t){return t.data=JSON.parse(JSON.stringify(e.data))};e.axes.forEach(n),e.legends.forEach(n)})),(t=p(e.description,null,e.data,"multiView",e)).description+=" with ".concat(t.children.length," nested charts")}else{var n=e.axes.length>0?2==e.axes.length?" ".concat(e.axes.length," axes"):" ".concat(e.axes[0].orient," axis"):"",r=1===e.legends.length?" and ".concat(e.legends.length," legend"):"";(t=p(e.description,null,e.data,"chart",e)).description+=" with ".concat(n," ").concat(r)}return t}(e.visualization);"table"===e.renderType?(r=c,o=document.createElement("table"),s=document.createElement("tbody"),d=document.createElement("tr"),r.fieldsUsed.forEach((function(e){var t=document.createElement("th");t.innerText=e,d.appendChild(t)})),s.appendChild(d),r.selected.forEach((function(e){var t=document.createElement("tr");r.fieldsUsed.forEach((function(i){var n=document.createElement("td");n.innerText=e[i],t.appendChild(n)})),s.appendChild(t)})),o.appendChild(s),n=o):(n=document.createElement("ul").appendChild(i(c)),new a(n).init()),e.ariaLabel&&n.setAttribute("aria-label",e.ariaLabel),null===(t=document.getElementById(e.domId))||void 0===t||t.appendChild(n),document.addEventListener("keypress",(function(e){if("t"===e.key.toLowerCase()){var t=document.getElementById("treeView");null!==t&&t.firstChild.focus()}}))}return t})()));