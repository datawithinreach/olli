<!DOCTYPE html>

<head>
    {% include imports.html %}
</head>

<body>
    <div class="Code-Block">
        <code class="prettyprint">
        d3. csv("https://raw.githubusercontent.com/vega/vega-datasets/next/data/stocks.csv").then(data => {
            let googleData = data.filter(d => d.symbol === "GOOG");
    
            let spec = { ... } // spec using googleData
    
            document.getElementById("Visualization-ObservablePlot").append(Plot.plot(spec))
    
            olli({
                visualization: OlliAdapters.ObservablePlotAdapter(spec, Plot.plot(spec)),
                renderType: "tree",
                domId: "AccessibilityTree-ObservablePlot"
            })
    </code>
    </div>
    <script type="module">
        import * as Plot from "https://cdn.skypack.dev/@observablehq/plot@0.5";

        d3.csv("https://raw.githubusercontent.com/vega/vega-datasets/next/data/stocks.csv").then(data => {
            let googleData = data.filter(d => d.symbol === "GOOG").map(d => {
                d.price = parseFloat(d.price);
                d.date = new Date(d.date)
                return d
            });

            let spec = {
                caption: `Google's stock prices over time.`,
                x: {
                    type: 'time',
                },
                y: {
                    grid: true
                },
                marks: [
                    Plot.line(googleData, { x: "date", y: "price", sort: "date" }),
                ]
            }

            document.getElementById("Visualization-ObservablePlot").append(Plot.plot(spec))

            olli({
                visualization: OlliAdapters.ObservablePlotAdapter(spec, Plot.plot(spec)),
                renderType: "tree",
                domId: "AccessibilityTree-ObservablePlot"
            })

        })
    </script>
</body>