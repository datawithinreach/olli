<!DOCTYPE html>

<head>
  {% include imports.html %}
</head>

<body>
  <div class="Code-Block">
    <code class="prettyprint">
    let spec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "A simple bar chart with embedded data.",
      "data": {
        "values": [
          {"a": "A", "b": 28}, {"a": "B", "b": 55}, {"a": "C", "b": 43},
          {"a": "D", "b": 91}, {"a": "E", "b": 81}, {"a": "F", "b": 53},
          {"a": "G", "b": 19}, {"a": "H", "b": 87}, {"a": "I", "b": 52}
        ]
      },
      "mark": "bar",
      "encoding": {
        "x": {"field": "a", "type": "nominal", "axis": {"labelAngle": 0}},
        "y": {"field": "b", "type": "quantitative"}
      }
    }

    let vegaSpec = vegaLite.compile(spec).spec
    const runtime = vega.parse(vegaSpec);
    const vegaRender = document.getElementById('Visualization-Vega-Lite');
    let view = new vega.View(runtime)
      .logLevel(vega.Warn)
      .initialize(vegaRender)
      .renderer('svg')
      .hover()
      .run();
  
    olli({ 
      visualization: VegaLiteAdapter(view, spec),
      renderType: "tree", 
      domId: "AccessibilityTree-Vega-Lite"
    })
  </code>
  </div>
  <script type="module">
    let spec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "A simple bar chart with embedded data.",
      "data": {
        "values": [
          { "a": "A", "b": 28 }, { "a": "B", "b": 55 }, { "a": "C", "b": 43 },
          { "a": "D", "b": 91 }, { "a": "E", "b": 81 }, { "a": "F", "b": 53 },
          { "a": "G", "b": 19 }, { "a": "H", "b": 87 }
        ]
      },
      "mark": "bar",
      "encoding": {
        "x": { "field": "a", "type": "nominal", "axis": { "labelAngle": 0 } },
        "y": { "field": "b", "type": "quantitative" }
      }
    }

    let vegaSpec = vegaLite.compile(spec).spec
    const runtime = vega.parse(vegaSpec);
    const vegaRender = document.getElementById('Visualization-Vega-Lite');
    let view = new vega.View(runtime)
      .logLevel(vega.Warn)
      .initialize(vegaRender)
      .renderer('svg')
      .hover()
      .runAsync()
      .then(v => {
        olli({
          visualization: OlliAdapters.VegaLiteAdapter(v.scenegraph().root.items[0], spec),
          renderType: "tree",
          domId: "AccessibilityTree-Vega-Lite"
        })
      });
  </script>
</body>