---
layout: default
title: "Quickstart"
---

<div>
  <div>
    <h2>Using Olli:</h2>
    <h3>HTML <code>&lt;script&gt;</code> Tags</h3>
    <p>The most basic way to use Olli is to add it to any basic HTML page.</p>
    <p><a href="https://codepen.io/matt-blanco/pen/abYQOEM" target="_blank">Fully functional HTML example with CodePen</a></p>
    <p>1. Add the script tag inside the document <code>&lt;head&gt;</code>:</p>
    <div class="Code-Block">
      <code class="language-xml">
        &lt;html&gt;


          &lt;head&gt;
            &lt;script src="https://cdn.jsdelivr.net/npm/vega@5"&gt;&lt;/script&gt;
            &lt;script src="https://cdn.jsdelivr.net/npm/vega-lite@5"&gt;&lt;/script&gt;
            &lt;script src="https://cdn.jsdelivr.net/npm/vega-embed@6"&gt;&lt;/script&gt;

            &lt;script src="https://cdn.jsdelivr.net/npm/olli@1.0.2"&gt;&lt;/script&gt;
            &lt;script src="https://cdn.jsdelivr.net/npm/olli-adapters@1.0.2"&gt;&lt;/script&gt;

          &lt;/head&gt;

          &lt;body&gt;
            &lt;div id="visualization"&gt;&lt;/div&gt;
            &lt;div id="accessibleVisTree"&gt;&lt;/div&gt;
          &lt;/body&gt;

        &lt;/html&gt;
      </code>
    </div>
    <p>2. Call Olli from a &lt;script&gt; tag:</p>
    <div class="Code-Block">
      <code class="language-xml">

        &lt;script&gt;
          let spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "description": "A simple bar chart with embedded data.",
            "data": {
              "values": [
                { "a": "A", "b": 28 }, { "a": "B", "b": 55 }, { "a": "C", "b": 43 },
                { "a": "D", "b": 91 }, { "a": "E", "b": 81 }, { "a": "F", "b": 53 },
                { "a": "G", "b": 19 }, { "a": "H", "b": 87 }
              ]
            },
            "mark": "bar",
            "encoding": {
              "x": { "field": "a", "type": "nominal", "axis": { "labelAngle": 0 } },
              "y": { "field": "b", "type": "quantitative" }
            }
          }

          let vegaSpec = vegaLite.compile(spec).spec
          const runtime = vega.parse(vegaSpec);
          const vegaRender = document.getElementById('visualization');
          let view = new vega.View(runtime)
            .logLevel(vega.Warn)
            .initialize(vegaRender)
            .renderer('svg')
            .hover()
            .run();

          OlliAdapters.VegaLiteAdapter(vegaLiteSpec).then(olliVisSpec => {
            document.getElementById("accessibleVisTree").append(olli(olliVisSpec))
          })
        &lt;/script&gt;

      </code>
    </div>
    <p><strong>NOTE:</strong> If using Vega or ObservablePlot the adapters are
      <strong><code>OlliAdapters.VegaAdapter</code></strong> and
      <strong><code>OlliAdapters.ObservableAdapter</code></strong> respectively.
    </p>
  </div>
  <div>
    <h3>NodeJS Applications</h3>
    <p>Olli can also be easily added to normal JavaScript applications.</p>
    <p><a href="https://codepen.io/matt-blanco/pen/zYWMGyX" target="_blank">Fully functional example with CodePen</a></p>
    <div>
      <p>1. Install the preset:</p>
      <div class="Code-Block">
        <code class="language-bash">
          npm install olli olli-adapters
        </code>
      </div>
      <p>2. Import <code>olli</code> and the adapter you want into the file you'll Olli in:</p>
      <div class="Code-Block">
        <code class="language-javascript">
          import { olli } from 'olli'
          import { VegaLiteAdapter } from 'olli-adapters' // Or import VegaAdapter or ObservableAdapter
        </code>
      </div>
      <p>3. Call <code>olli</code> and set-up your configuration object:</p>
      <div class="Code-Block">
        <code class="language-javascript">

          VegaLiteAdapter(vegaLiteSpec).then(olliVisSpec => {
            document.getElementById("accessibleVisTree").append(olli(olliVisSpec))
          })

        </code>
      </div>
      <p><strong>NOTE:</strong> Within any JavaScript file, an adapter can be called using an <code>async/await</code>
        function instead of within a promise reaction.
    </div>
  </div>
  <div>
    <h3>React</h3>
    <p>Olli can even be used with React, but due to how React handles the state of the DOM, <code>olli</code> has to be
      called
      inside the <code>useEffect(() => {})</code> hook.
    </p>
    <p><a href="https://codepen.io/matt-blanco/pen/jOzQPdx" target="_blank">Fully functional example with CodePen</a></p>
    <p>1. Install preset:</p>
    <div class="Code-Block">
      <code class="language-bash">
        npm install olli olli-adapters
      </code>
    </div>
    <p>2. Import <code>olli</code> and adapter you want to use into the component you want to use it in</p>
    <div class="Code-Block">
      <code class="language-javascript">
        import { olli } from 'olli'
        import { VegaLiteAdapter} from 'olli-adapters' // Or import VegaAdapter or ObservableAdapter
      </code>
    </div>
    <p>3. Call <code>olli</code> and set-up your configuration object inside the <code>useEffect(() => {})</code> hook:
    </p>
    <div class="Code-Block">
      <code class="language-javascript">

          useEffect(() => {
            VegaLiteAdapter(vegaLiteSpec).then(olliVisSpec => {
              document.getElementById("accessibleVisTree").append(olli(olliVisSpec))
            })
          })

      </code>
    </div>
  </div>
  <div>
    <h2 id="writingAdapters">Writing Your Own Adapter:</h2>
    <p>
      It's likely that Olli may not support your visualization just yet. Luckily following a simply interface you can
      write your own and help make more visualizations accessible across the web. Below you'll find the interface for an
      adapter:
    </p>
    <div class="Code-Block">
      <code class="language-typescript">
        type VisAdapter&lt;T&gt; = (spec: T) => Promise&lt;OlliVisSpec&gt;;
      </code>
    </div>
    <p>
      The parameter <code>spec: T</code> is the specification used to render your visualization. For Vega and Vega-Lite
      this is the visualization grammar JSON object, and for Observable Plot it's the Object passed into the
      <code>Plot.plot(...)</code> function.
    </p>
    <p>
      The reason the adapters return <code>Promise&lt;OlliVisSpec&gt;</code> is in case you need make an asynchronous
      call such as retreiving a dataset from a URL.
    </p>
    <h3>The <code>OlliVisSpec</code> Type</h3>
    <p>
      The <code>OlliVisSpec</code> is an object that contains many of the Grammar of Graphics elements of a
      visualization such as <code>Guides</code> like Axes and Legends, the data used in the chart, a high-level title or
      description, and other information about the visualization. There's a seperate interface for charts that contain
      facets too. Below you can see each interface:
    </p>
    <p>
      For a full breakdown on the additional types such as <code>Guides</code> you can look at the
      <code><a href="https://github.com/mitvis/olli/blob/main/packages/adapters/src/Types.ts" target="_blank">Types.ts</a></code>.
    </p>
    <div class="Code-Block">
      <code class="language-typescript">
        /**
        * A simple union type that when implemented a concrete adapter class can be used
        * with any visualization library to later be used to create
        * an explorable Accessibility Tree.
        */
        type BaseOlliVisSpec = {
                type: string,
            description: string,
            data: any[],
            dataFieldsUsed: string[],
        }

        /**
        * Outlines the grammar of graphics information that has to be parsed from a visualization.
        */
        export interface Chart extends BaseOlliVisSpec {
            type: "chart",
            axes: Axis[] ,
            legends: Legend[],
            description: string,
            gridNodes: Guide[],
            dataFieldsUsed: string[],
            markUsed?: Mark,
            title? : string
        }

        /**
        * plots that may have multiple charts contained within a single specification
        */
        export interface FacetedChart extends BaseOlliVisSpec {
            type: "facetedChart",
            // maps faceted value to chart
            charts: Map&lt;any, Chart&gt;,
            facetedField: string,
        }
      </code>
    </div>
    <p>
      When writing your own adapter to transform your visualization into an <code>OlliVisSpec</code> it can be helpful
      to have functions that parse the chart for individual axes, legends, and non-faceted charts. For an example you
      can look at the <a href="https://github.com/mitvis/olli/blob/main/packages/adapters/src/VegaLiteAdapter.ts"
        target="_blank">Vega-Lite adapter</a>.
    </p>
  </div>
</div>

<script type="module">
  import prettier from "https://unpkg.com/prettier@2.7.1/esm/standalone.mjs";
  import parserBabel from "https://unpkg.com/prettier@2.7.1/esm/parser-babel.mjs";
  import parserHtml from "https://unpkg.com/prettier@2.7.1/esm/parser-html.mjs";
  import parserTypescript from "https://unpkg.com/prettier@2.7.1/esm/parser-typescript.mjs";


  const blocks = document.querySelectorAll('.Code-Block');
  blocks.forEach((el) => {
      const codeTag = el.querySelector('code');
      const code = codeTag.innerHTML.trim().replaceAll('&lt;', '<').replaceAll('&gt;', '>');

      const fmt = codeTag.classList.contains('language-javascript') ?
        prettier.format(code, {
            parser: "babel",
            plugins: [parserBabel],
        }) : (
          codeTag.classList.contains('language-typescript') ?
            prettier.format(code, {
                parser: "typescript",
                plugins: [parserTypescript],
            }) :
            prettier.format(code, {
                parser: "html",
                plugins: [parserHtml],
            })
      );

      codeTag.textContent = fmt;

      hljs.highlightElement(codeTag);
  })
</script>